let ponz = {};

// {
//   "_id": "5901263dcaf53339cb4bf597",
//   "fname": "William",
//   "lname": "William",
//   "email": "William",
//   "points": 186,
//   "passwordHash": "$2a$08$Bby.RkKbj9DZyRinaFwUIOAkwjEd8oMjxb0x.mhWDBmMXHi0fKvie",
//   "__v": 3,
//   "children": [
//     {
//       "_id": "5901264dcaf53339cb4bf598",
//       "fname": "Jerry",
//       "lname": "Jerry",
//       "email": "Jerry",
//       "points": 130,
//       "passwordHash": "$2a$08$.NWUUeIsTlavtKfOR.mrOemxwCLZGGPCLCwxcRmTkQ62qWFoDwcVG",
//       "parent": "5901263dcaf53339cb4bf597",
//       "__v": 2,
//       "children": [
//         {
//           "_id": "59012673caf53339cb4bf59a",
//           "fname": "Vlad",
//           "lname": "Vlad",
//           "email": "Vlad",
//           "points": 99,
//           "passwordHash": "$2a$08$d94gtE9fKDapCADDkLubUe0LiX1cf.lBDAHuhwFBTD6Wr7NNAk2Yy",
//           "parent": "5901264dcaf53339cb4bf598",
//           "__v": 1,
//           "children": [
//             {
//               "_id": "590126cecaf53339cb4bf59c",
//               "fname": "Egle",
//               "lname": "Egle",
//               "email": "Egle",
//               "points": 118,
//               "passwordHash": "$2a$08$bSEceYl.4wKEv.FT9QiZeOYt1kqOyHgutNPZPp3dKrHPJFW4Iw.8W",
//               "parent": "59012673caf53339cb4bf59a",
//               "__v": 2,
//               "children": [
//                 {
//                   "_id": "590126dfcaf53339cb4bf59d",
//                   "fname": "Mark",
//                   "lname": "Mark",
//                   "email": "Mark",
//                   "points": 77,
//                   "passwordHash": "$2a$08$5fTuWUZndtBplFMpHy/uQus7eiFwScM1cs950/K0fPID5npOMSBAC",
//                   "parent": "590126cecaf53339cb4bf59c",
//                   "__v": 1,
//                   "children": [
//                     {
//                       "_id": "5901270fcaf53339cb4bf59e",
//                       "fname": "Nicolas",
//                       "lname": "Nicolas",
//                       "email": "Nicolas",
//                       "points": 75,
//                       "passwordHash": "$2a$08$lT1TAtiZfcO/NJ6wTG0yB.P55VG/B7rI8swOtOr6tEyJKCbQgZ9D6",
//                       "parent": "590126dfcaf53339cb4bf59d",
//                       "__v": 1,
//                       "children": [
//                         {
//                           "_id": "5901273fcaf53339cb4bf5a0",
//                           "fname": "Renzo",
//                           "lname": "Renzo",
//                           "email": "Renzo",
//                           "points": 70,
//                           "passwordHash": "$2a$08$If1PmtPQcUhfmkg2qRU6P.Er6O00PPv5RQrI9H9FH500lxAFwpd3q",
//                           "parent": "5901270fcaf53339cb4bf59e",
//                           "__v": 1,
//                           "children": [
//                             {
//                               "_id": "59012aa5515a023cce1ab1df",
//                               "fname": "Dave",
//                               "lname": "Dave",
//                               "email": "Dave",
//                               "points": 60,
//                               "passwordHash": "$2a$08$OQsuQ9Fe9CYD7XYRpXStL.8zOoKGJ8RXjwYKiGO50bK9a2/vVyk1S",
//                               "parent": "5901273fcaf53339cb4bf5a0",
//                               "__v": 1,
//                               "children": [
//                                 {
//                                   "_id": "5901fe5056659919c91681d4",
//                                   "fname": "Slave",
//                                   "lname": "Slave",
//                                   "email": "Slave",
//                                   "points": 40,
//                                   "passwordHash": "$2a$08$H26kyO1ioFr1HfQ.kp5kCuow.TwbwFH4BZXjOqW.LMJAws7IKS1iC",
//                                   "parent": "59012aa5515a023cce1ab1df",
//                                   "__v": 1,
//                                   "children": [
//                                     {
//                                       "_id": "5901fede1e0c611b29358dd8",
//                                       "fname": "Slave Jr.",
//                                       "lname": "Slave Jr.",
//                                       "email": "Slave Jr.",
//                                       "points": 0,
//                                       "passwordHash": "$2a$08$bgmeftg2AjVi8Xqr3z2CBuAImj2k/PFj34l7NZgfjqxAf/ngl62gi",
//                                       "parent": "5901fe5056659919c91681d4",
//                                       "__v": 0,
//                                       "children": []
//                                     }
//                                   ]
//                                 }
//                               ]
//                             }
//                           ]
//                         }
//                       ]
//                     }
//                   ]
//                 },
//                 {
//                   "_id": "59012728caf53339cb4bf59f",
//                   "fname": "Nicholas",
//                   "lname": "Nicholas",
//                   "email": "Nicholas",
//                   "points": 0,
//                   "passwordHash": "$2a$08$BMgghMzNy8BNqaznGHTg7uBDZfpOomR6Vro1Bl13FDtpS1tlzJIoS",
//                   "parent": "590126cecaf53339cb4bf59c",
//                   "__v": 0,
//                   "children": []
//                 }
//               ]
//             }
//           ]
//         },
//         {
//           "_id": "59012681caf53339cb4bf59b",
//           "fname": "Tom",
//           "lname": "Tom",
//           "email": "Tom",
//           "points": 0,
//           "passwordHash": "$2a$08$9ZoqNRJCF6GLXtYndzPeCu/En/M6paVCSL8E.SO.xWrVdl8mCCxY.",
//           "parent": "5901264dcaf53339cb4bf598",
//           "__v": 0,
//           "children": []
//         }
//       ]
//     },
//     {
//       "_id": "59012655caf53339cb4bf599",
//       "fname": "Kit",
//       "lname": "Kit",
//       "email": "Kit",
//       "points": 0,
//       "passwordHash": "$2a$08$vDAFf40aX75XwnjdKysxR.8nSQ5U5MLiCYWYY7AidOT5Iiv0nMmw2",
//       "parent": "5901263dcaf53339cb4bf597",
//       "__v": 0,
//       "children": []
//     },
//     {
//       "_id": "5901fe1f56659919c91681d3",
//       "fname": "Chris",
//       "lname": "Chris",
//       "email": "Chris",
//       "points": 0,
//       "passwordHash": "$2a$08$3V7gXCClOyc3bZrp5IP6F.v6KaNv8dtINeXh7P70cQuaFQdfGbMKS",
//       "parent": "5901263dcaf53339cb4bf597",
//       "__v": 0,
//       "children": []
//     }
//   ]
// }

ponz.buildPyramid = user => {
  let pyramidArray = [1];
  let level = 0;
  pyramidArray.push(user.children.length);
  let queue = user.children;
  queue.push(null);
  while (queue.length) {
    let current = queue.shift();
    if (current) {
      level += current.children.length;
      queue.concat(current.children);
    } else {
      pyramidArray.push(level);
      level = 0;
      if (queue.length) {
        queue.push(null);
      }
    }
  }
  console.log(pyramidArray);
  return pyramidArray;
};

module.exports = ponz;
